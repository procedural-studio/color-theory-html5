<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Traditional Color Mixing Palette</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #f5f5f5, #e8e8e8);
            font-family: 'Arial', sans-serif;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 30px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            color: #2c3e50;
            margin: 0;
            font-size: 2.5em;
            font-weight: 300;
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
            align-items: center;
            justify-content: center;
        }

        .color-palette {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .color-btn {
            width: 50px;
            height: 50px;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .color-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }

        .color-btn.selected {
            transform: scale(1.2);
            box-shadow: 0 0 0 4px #3498db;
        }

        .brush-controls {
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-items: center;
        }

        .brush-size {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .brush-size input {
            width: 150px;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .palette-selector {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }

        .palette-btn {
            padding: 8px 16px;
            border: 2px solid #bdc3c7;
            border-radius: 20px;
            background: white;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.2s;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .palette-btn.active {
            border-color: #3498db;
            background: #3498db;
            color: white;
            transform: translateY(-1px);
        }

        .palette-btn:hover {
            border-color: #3498db;
            transform: translateY(-1px);
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: #3498db;
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #95a5a6;
            color: white;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
            transform: translateY(-2px);
        }

        .canvas-container {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }

        #palette-canvas {
            border: 3px solid #34495e;
            border-radius: 15px;
            cursor: crosshair;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            background: #fefefe;
        }

        .instructions {
            margin-top: 20px;
            text-align: center;
            color: #7f8c8d;
            font-style: italic;
        }

        @media (max-width: 768px) {
            .controls {
                flex-direction: column;
            }
            
            .color-palette {
                justify-content: center;
            }
            
            #palette-canvas {
                max-width: 100%;
                height: auto;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸŽ¨ Traditional Color Mixing Palette</h1>
        </div>

        <div class="controls">
            <div class="palette-selector">
                <label style="font-weight: 500; color: #2c3e50;">Color Set:</label>
                <button class="palette-btn active" data-palette="traditional">Traditional</button>
                <button class="palette-btn" data-palette="rby">Classic RBY</button>
                <button class="palette-btn" data-palette="primary">RGB Primary</button>
                <button class="palette-btn" data-palette="earth">Earth Tones</button>
                <button class="palette-btn" data-palette="cool">Cool Colors</button>
                <button class="palette-btn" data-palette="warm">Warm Colors</button>
            </div>

            <div class="color-palette" id="color-palette">
                <!-- Colors will be dynamically loaded here -->
            </div>

            <div class="brush-controls">
                <div class="brush-size">
                    <label>Brush Size:</label>
                    <input type="range" id="brush-size" min="5" max="50" value="20">
                    <span id="size-display">20px</span>
                </div>
                <div class="brush-size">
                    <label>Opacity:</label>
                    <input type="range" id="opacity" min="10" max="100" value="80">
                    <span id="opacity-display">80%</span>
                </div>
            </div>

            <div class="action-buttons">
                <button class="btn btn-primary" id="blend-mode">Blend: Mix</button>
                <button class="btn btn-secondary" id="clear-palette">Clear Palette</button>
                <button class="btn btn-secondary" id="save-palette">Save Image</button>
            </div>
        </div>

        <div class="canvas-container">
            <canvas id="palette-canvas" width="800" height="600"></canvas>
        </div>

        <div class="instructions">
            Select a color and paint on the palette. Colors will blend naturally where they overlap. 
            Experiment with different brush sizes and opacity levels for realistic mixing effects.
        </div>
    </div>

    <script>
        class ColorMixingPalette {
            constructor() {
                this.canvas = document.getElementById('palette-canvas');
                this.ctx = this.canvas.getContext('2d');
                this.isDrawing = false;
                this.currentColor = '#e74c3c';
                this.brushSize = 20;
                this.opacity = 0.8;
                this.blendMode = 'source-over';
                this.lastX = 0;
                this.lastY = 0;
                this.currentPalette = 'traditional';

                this.colorPalettes = {
                    traditional: [
                        { color: '#e74c3c', name: 'Cadmium Red' },
                        { color: '#f39c12', name: 'Cadmium Orange' },
                        { color: '#f1c40f', name: 'Cadmium Yellow' },
                        { color: '#27ae60', name: 'Viridian Green' },
                        { color: '#3498db', name: 'Ultramarine Blue' },
                        { color: '#9b59b6', name: 'Dioxazine Purple' },
                        { color: '#8b4513', name: 'Burnt Sienna' },
                        { color: '#2c3e50', name: 'Payne\'s Gray' },
                        { color: '#ecf0f1', name: 'Titanium White' },
                        { color: '#34495e', name: 'Ivory Black' }
                    ],
                    rby: [
                        { color: '#dc143c', name: 'Pure Red' },
                        { color: '#0047ab', name: 'Pure Blue' },
                        { color: '#ffd700', name: 'Pure Yellow' },
                        { color: '#ffffff', name: 'White' },
                        { color: '#000000', name: 'Black' }
                    ],
                    primary: [
                        { color: '#ff0000', name: 'Red Primary' },
                        { color: '#00ff00', name: 'Green Primary' },
                        { color: '#0000ff', name: 'Blue Primary' },
                        { color: '#ffff00', name: 'Yellow Secondary' },
                        { color: '#ff00ff', name: 'Magenta Secondary' },
                        { color: '#00ffff', name: 'Cyan Secondary' },
                        { color: '#ffffff', name: 'White' },
                        { color: '#000000', name: 'Black' }
                    ],
                    earth: [
                        { color: '#8b4513', name: 'Burnt Sienna' },
                        { color: '#a0522d', name: 'Raw Sienna' },
                        { color: '#cd853f', name: 'Raw Umber' },
                        { color: '#654321', name: 'Burnt Umber' },
                        { color: '#d2691e', name: 'Yellow Ochre' },
                        { color: '#b22222', name: 'Red Ochre' },
                        { color: '#556b2f', name: 'Olive Green' },
                        { color: '#2f4f4f', name: 'Charcoal' },
                        { color: '#f5deb3', name: 'Warm White' },
                        { color: '#696969', name: 'Warm Gray' }
                    ],
                    cool: [
                        { color: '#4169e1', name: 'Royal Blue' },
                        { color: '#0047ab', name: 'Cobalt Blue' },
                        { color: '#20b2aa', name: 'Light Sea Green' },
                        { color: '#00ced1', name: 'Turquoise' },
                        { color: '#4682b4', name: 'Steel Blue' },
                        { color: '#6495ed', name: 'Cornflower Blue' },
                        { color: '#9370db', name: 'Blue Violet' },
                        { color: '#f0f8ff', name: 'Cool White' },
                        { color: '#2f4f4f', name: 'Cool Gray' }
                    ],
                    warm: [
                        { color: '#ff4500', name: 'Red Orange' },
                        { color: '#ff6347', name: 'Tomato Red' },
                        { color: '#ff8c00', name: 'Dark Orange' },
                        { color: '#ffa500', name: 'Pure Orange' },
                        { color: '#ffd700', name: 'Gold Yellow' },
                        { color: '#ffff00', name: 'Bright Yellow' },
                        { color: '#dc143c', name: 'Crimson' },
                        { color: '#b22222', name: 'Fire Brick' },
                        { color: '#fffaf0', name: 'Warm White' },
                        { color: '#8b7355', name: 'Warm Gray' }
                    ]
                };

                this.initializeCanvas();
                this.loadColorPalette('traditional');
                this.bindEvents();
            }

            initializeCanvas() {
                // Set canvas background to white
                this.ctx.fillStyle = '#fefefe';
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                
                // Set initial drawing properties
                this.ctx.lineCap = 'round';
                this.ctx.lineJoin = 'round';
                this.ctx.globalCompositeOperation = this.blendMode;
            }

            loadColorPalette(paletteName) {
                const palette = this.colorPalettes[paletteName];
                const colorPaletteContainer = document.getElementById('color-palette');
                
                // Clear existing colors
                colorPaletteContainer.innerHTML = '';
                
                // Add new colors
                palette.forEach((colorObj, index) => {
                    const colorBtn = document.createElement('button');
                    colorBtn.className = `color-btn ${index === 0 ? 'selected' : ''}`;
                    colorBtn.style.backgroundColor = colorObj.color;
                    colorBtn.dataset.color = colorObj.color;
                    colorBtn.title = colorObj.name;
                    colorPaletteContainer.appendChild(colorBtn);
                });
                
                // Set the first color as selected
                this.currentColor = palette[0].color;
                this.currentPalette = paletteName;
            }

            bindEvents() {
                // Palette selection
                document.querySelectorAll('.palette-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        document.querySelector('.palette-btn.active')?.classList.remove('active');
                        e.target.classList.add('active');
                        this.loadColorPalette(e.target.dataset.palette);
                        this.bindColorEvents(); // Re-bind color events for new palette
                    });
                });

                // Initial color event binding
                this.bindColorEvents();

                // Brush size
                const brushSize = document.getElementById('brush-size');
                const sizeDisplay = document.getElementById('size-display');
                brushSize.addEventListener('input', (e) => {
                    this.brushSize = parseInt(e.target.value);
                    sizeDisplay.textContent = `${this.brushSize}px`;
                });

                // Opacity
                const opacity = document.getElementById('opacity');
                const opacityDisplay = document.getElementById('opacity-display');
                opacity.addEventListener('input', (e) => {
                    this.opacity = parseInt(e.target.value) / 100;
                    opacityDisplay.textContent = `${e.target.value}%`;
                });

                // Blend mode toggle
                document.getElementById('blend-mode').addEventListener('click', (e) => {
                    if (this.blendMode === 'source-over') {
                        this.blendMode = 'multiply';
                        e.target.textContent = 'Blend: Darken';
                        e.target.className = 'btn btn-primary';
                    } else if (this.blendMode === 'multiply') {
                        this.blendMode = 'overlay';
                        e.target.textContent = 'Blend: Overlay';
                    } else if (this.blendMode === 'overlay') {
                        this.blendMode = 'color-burn';
                        e.target.textContent = 'Blend: Burn';
                    } else {
                        this.blendMode = 'source-over';
                        e.target.textContent = 'Blend: Mix';
                    }
                    this.ctx.globalCompositeOperation = this.blendMode;
                });

                // Clear palette
                document.getElementById('clear-palette').addEventListener('click', () => {
                    this.ctx.fillStyle = '#fefefe';
                    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                });

                // Save palette
                document.getElementById('save-palette').addEventListener('click', () => {
                    const link = document.createElement('a');
                    link.download = 'color-palette.png';
                    link.href = this.canvas.toDataURL();
                    link.click();
                });

                // Mouse events
                this.canvas.addEventListener('mousedown', this.startDrawing.bind(this));
                this.canvas.addEventListener('mousemove', this.draw.bind(this));
                this.canvas.addEventListener('mouseup', this.stopDrawing.bind(this));
                this.canvas.addEventListener('mouseout', this.stopDrawing.bind(this));

                // Touch events for mobile
                this.canvas.addEventListener('touchstart', this.handleTouch.bind(this));
                this.canvas.addEventListener('touchmove', this.handleTouch.bind(this));
                this.canvas.addEventListener('touchend', this.stopDrawing.bind(this));
            }

            getMousePos(e) {
                const rect = this.canvas.getBoundingClientRect();
                const scaleX = this.canvas.width / rect.width;
                const scaleY = this.canvas.height / rect.height;
                
                return {
                    x: (e.clientX - rect.left) * scaleX,
                    y: (e.clientY - rect.top) * scaleY
                };
            }

            startDrawing(e) {
                this.isDrawing = true;
                const pos = this.getMousePos(e);
                this.lastX = pos.x;
                this.lastY = pos.y;
            }

            draw(e) {
                if (!this.isDrawing) return;

                const pos = this.getMousePos(e);
                
                // Create gradient for more natural blending
                const gradient = this.ctx.createRadialGradient(
                    pos.x, pos.y, 0,
                    pos.x, pos.y, this.brushSize / 2
                );
                
                // Convert hex color to rgba for opacity control
                const r = parseInt(this.currentColor.slice(1, 3), 16);
                const g = parseInt(this.currentColor.slice(3, 5), 16);
                const b = parseInt(this.currentColor.slice(5, 7), 16);
                
                gradient.addColorStop(0, `rgba(${r}, ${g}, ${b}, ${this.opacity})`);
                gradient.addColorStop(0.7, `rgba(${r}, ${g}, ${b}, ${this.opacity * 0.3})`);
                gradient.addColorStop(1, `rgba(${r}, ${g}, ${b}, 0)`);

                this.ctx.globalCompositeOperation = this.blendMode;
                this.ctx.fillStyle = gradient;
                
                // Draw smooth line from last position to current
                this.ctx.beginPath();
                this.ctx.moveTo(this.lastX, this.lastY);
                this.ctx.lineTo(pos.x, pos.y);
                this.ctx.lineWidth = this.brushSize;
                this.ctx.strokeStyle = `rgba(${r}, ${g}, ${b}, ${this.opacity})`;
                this.ctx.stroke();
                
                // Add circular brush tip for more natural look
                this.ctx.beginPath();
                this.ctx.arc(pos.x, pos.y, this.brushSize / 2, 0, Math.PI * 2);
                this.ctx.fill();

                this.lastX = pos.x;
                this.lastY = pos.y;
            }

            stopDrawing() {
                this.isDrawing = false;
            }

            handleTouch(e) {
                e.preventDefault();
                const touch = e.touches[0];
                const mouseEvent = new MouseEvent(e.type === 'touchstart' ? 'mousedown' : 
                                                 e.type === 'touchmove' ? 'mousemove' : 'mouseup', {
                    clientX: touch.clientX,
                    clientY: touch.clientY
                });
                this.canvas.dispatchEvent(mouseEvent);
            }

            bindColorEvents() {
                // Color selection - bind to current colors in palette
                document.querySelectorAll('.color-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        document.querySelector('.color-btn.selected')?.classList.remove('selected');
                        e.target.classList.add('selected');
                        this.currentColor = e.target.dataset.color;
                    });
                });
            }
        }

        // Initialize the palette when page loads
        document.addEventListener('DOMContentLoaded', () => {
            new ColorMixingPalette();
        });
    </script>
</body>
</html>
